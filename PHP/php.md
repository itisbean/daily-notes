# PHP

## 环境问题

### [[environment.md]]

## Package

### [[packagelist.md]]

## 其他问题

### 1. 使用exec执行shell命令，无反应

代码如下，使用该用户直接执行是没问题的，说明不是权限问题。但是在php里执行就是空的结果
```php
$cmd = "cd /data/backup/instalive && pyinstalive -d yungchoyee";
exec($cmd, $output, $return_val);
echo $output.PHP_EOL; 
```
解决：最后在`$cmd`后加上` 2>&1`，命令就会输出shell执行时的结果（或错误）到$output变量。

### 2. exec或system等执行nohup命令，多条会失败

解决：使用`sh -c`
```php
$cmd = "cmd1 && cmd2 && cmd3"
$cmd = "/usr/bin/nohup sh -c \"{$cmd}\" > /data/output & echo $!";
$output = shell_exec($cmd);
echo $output.PHP_EOL; 
```

[//begin]: # "Autogenerated link references for markdown compatibility"
[environment.md]: environment "Environment Problem"
[packagelist.md]: packagelist "Create PHP Package"
[//end]: # "Autogenerated link references"