# Git Commands

## 配置相关

[[git-config]]

## 创建本地仓库并关联远程

```
git init
git add .
git commit -m "init"
git remote add origin https://github.com/itisbean/go_learn.git
git push -u origin master
```

## 强制pull

```
git fetch --all
git reset --hard origin/master
git pull
```

## 删除提交记录
某次提交不小心泄露了一些关键信息，一开始仓库设置`private`，转为`public`后想删掉那次提交记录，然而目前没有找到删除某次提交的办法，只能 删除分支再重建 
```git
# 1. 创建一个新的本地分支
git checkout --orphan latest_branch
# 2. 添加所有文件
git add -A
# 3. 提交更改
git commit -am "commit message"
# 4. 删除分支
git branch -D master
# 5. 将当前分支重命名
git branch -m master
# 6. 强制更新存储库
git push -f origin master
```

## 撤销commit

保留工作区改动文件

```git
<!-- @hash: git log 提交记录hash值 -->
git reset --soft @hash
```
或
```git
<!-- ~2 恢复到2次前的提交 -->
git reset --soft HEAD~2
```

## 常见错误

1. 报错信息： <span style="color:red">index file smaller than expected</span>

```git
rm .git/index
git reset HEAD .
```

[//begin]: # "Autogenerated link references for markdown compatibility"
[git-config]: git-config "Git Config"
[//end]: # "Autogenerated link references"