# MySQL

*[数据库]: 物理操作系统文件或其他形式文件类型的集合。
*[实例]: 数据库实例才是真正用于操作数据库文件的。

MySQL数据库由后台线程以及一个共享内存区组成。共享内存可以被运行的后台线程所共享。

MySQL数据库中，实例 与 数据库 关系通常是一一对应的。但是在集群的情况下，可能存在一个数据库被多个数据实例使用的情况。

## MySQL组成

- 连接池组件
- 管理服务和工具组件
- SQL接口组件
- 查询分析器组件
- 优化器组件
- 缓冲（Cache）组件
- 插件式存储引擎
- 物理文件

## MySQL各存储引擎的特点

*[存储引擎]: 存储引擎是基于表的，而不是数据库
*[InnoDB]: MySQL5.5.8版本后是默认数据引擎
*[NDB]: NDB存储引擎是一个集群存储引擎
*[vachar]: 变长字段
*[char]: 定常字段
*[Maria]: MyISAM升级版
*[MVCC]: 多版本并发控制

存储引擎 | 特点
--- | ---
InnoDB | 支持事务
^ | 行锁设计
^ | 支持外键
^ | 默认 REPEATABLE 级别
^ | 使用 next-key locking 的策略来避免 幻读 (phantom)
^ | 插入缓冲 (insert buffer)
^ | 二次写 (double write)
^ | 自适应哈希索引 (adaptive hash index)
^ | 预读 (read ahead)
MyISAM | 不支持事务
^ | 表锁设计
^ | 支持全文索引
^ | 缓冲池只缓存索引文件，而不缓冲数据文件
NDB | 数据全部放在内存中(从MySQL5.1版本开始, 可以将 非索引数据放在磁盘上), 因此主键查找 (primary key lookups) 的速度极快, 并且通过添加NDB数据存储节点 (Data Node) 可以线性地提高数据库性能
^ | 缺点是连接操作（JOIN）是在数据库层而不是存储引擎层完成, 所以==查询速度很慢==
Memory | 数据存放在内存中, 速度非常快
^ | 默认使用哈希索引
^ | 只支持表锁
^ | 并发性能差
^ | 不支持TEXT和BLOB列类型
^ | 存储 vachar 时是按照 char 的方式进行的, 所以会浪费内存
Archive | 只支持INSERT和SELECT操作
^ | 压缩比可达1:10
^ | 提供高速插入和压缩功能
Federated | 并不存放数据, 只是指向一台远程MySQL数据库服务器上的表
^ | 只支持MySQL数据库表
Maria | 支持缓存数据和索引文件
^ | 行锁
^ | MVCC
^ | 支持事务和非事务安全的选项
^ | 更好的BLOB字符类型的处理性能

## [[innodb存储引擎]]

## [[文件]]

## [[mysql-commands]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[innodb存储引擎]: innodb存储引擎 "InnoDB存储引擎"
[文件]: 文件 "文件"
[mysql-commands]: mysql-commands "Mysql Commands"
[//end]: # "Autogenerated link references"
